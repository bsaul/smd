<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compute Standardized Mean Difference — smd • smd</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Standardized Mean Difference — smd"><meta property="og:description" content="Computes the standardized mean differnce (SMD) between two groups.
$$
 d = \sqrt{D' S^{-1} D}
$$
where \(D\) is a vector of differences between group 1 and 2 and \(S\) is
the covariance matrix of these differences. If \(D\) is length 1, the result
is multplied by \(sign(D)\).
In the case of a numeric or integer variable, this is equivalent
to:
$$
  d = \frac{\bar{x}_1 - \bar{x}_2}{\sqrt{(s^2_1 + s^2_2)/2}}
$$
where \(\bar{x}_g\) is the sample mean for group \(g\) and \(s^2_g\) is
the sample variance.
For a logical or factor with only two levels, the equation above is
\(\bar{x}_g = \hat{p}_g\), i.e. the sample proportion and \(s^2_g = \hat{p}_g(1 - \hat{p}_g)\).
When using the SMD to evaluate the effectiveness of weighting in achieving
covariate balance, it is important to isolate the change in SMD before and
after weighting to the change in mean difference, so the denominator (covariance matrix)
must be held constant doi:10.1002/sim.3207
Stuart 2008.
By default, the unweighted covariance matrix is used to compute SMD in both
the unweighted and weighted case. If the weights are not being used to adjust
for covariate imbalance (e.g. case weights), the unwgt.var argument
can be set to FALSE to use the weighted covariance matrix as the denominator."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">smd</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/smd_usage.html">Using smd</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bsaul/smd/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute Standardized Mean Difference</h1>
    <small class="dont-index">Source: <a href="https://github.com/bsaul/smd/blob/HEAD/R/smd.R" class="external-link"><code>R/smd.R</code></a></small>
    <div class="hidden name"><code>smd.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Computes the standardized mean differnce (SMD) between two groups.</p>
<p>$$
 d = \sqrt{D' S^{-1} D}
$$</p>
<p>where \(D\) is a vector of differences between group 1 and 2 and \(S\) is
the covariance matrix of these differences. If \(D\) is length 1, the result
is multplied by \(sign(D)\).</p>
<p>In the case of a <code>numeric</code> or <code>integer</code> variable, this is equivalent
to:</p>
<p>$$
  d = \frac{\bar{x}_1 - \bar{x}_2}{\sqrt{(s^2_1 + s^2_2)/2}}
$$
where \(\bar{x}_g\) is the sample mean for group \(g\) and \(s^2_g\) is
the sample variance.</p>
<p>For a <code>logical</code> or <code>factor</code> with only two levels, the equation above is
\(\bar{x}_g = \hat{p}_g\), i.e. the sample proportion and \(s^2_g = \hat{p}_g(1 - \hat{p}_g)\).</p>
<p>When using the SMD to evaluate the effectiveness of weighting in achieving
covariate balance, it is important to isolate the change in SMD before and
after weighting to the change in mean difference, so the denominator (covariance matrix)
must be held constant <a href="https://doi.org/10.1002/sim.3207" class="external-link">doi:10.1002/sim.3207</a>
Stuart 2008.
By default, the unweighted covariance matrix is used to compute SMD in both
the unweighted and weighted case. If the weights are not being used to adjust
for covariate imbalance (e.g. case weights), the <code>unwgt.var</code> argument
can be set to <code>FALSE</code> to use the weighted covariance matrix as the denominator.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for character,ANY,missing</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for character,ANY,numeric</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for logical,ANY,missing</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for logical,ANY,numeric</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for matrix,ANY,missing</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for matrix,ANY,numeric</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for list,ANY,missing</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for list,ANY,numeric</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for data.frame,ANY,missing</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for data.frame,ANY,numeric</span></span>
<span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">w</span>, std.error <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span>, gref <span class="op">=</span> <span class="fl">1L</span>, unwgt.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a <code>vector</code> or <code>matrix</code> of values</p></dd>


<dt>g</dt>
<dd><p>a vector of at least 2 groups to compare. This should coercable to a
<code>factor</code>.</p></dd>


<dt>w</dt>
<dd><p>a vector of <code>numeric</code> weights (optional)</p></dd>


<dt>std.error</dt>
<dd><p>Logical indicator for computing standard errors using
<code><a href="compute_smd_var.html">compute_smd_var</a></code>. Defaults to <code>FALSE</code>.</p></dd>


<dt>na.rm</dt>
<dd><p>Remove <code>NA</code> values from <code>x</code>? Defaults to <code>FALSE</code>.</p></dd>


<dt>gref</dt>
<dd><p>an integer indicating which level of <code>g</code> to use as the reference
group. Defaults to <code>1</code>.</p></dd>


<dt>unwgt.var</dt>
<dd><p>Use unweighted or weighted covariance matrix. Defaults to <code>TRUE</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a <code>data.frame</code> containing standardized mean differences between
   levels of <code>g</code> for values of <code>x</code>. The <code>data.frame</code> contains
   the columns:</p>
<p></p>
<ul><li><p><code>term</code>: the level being comparing to the reference level</p></li>
<li><p><code>estimate</code>: SMD estimates</p></li>
<li><p><code>std.error</code>: (if <code>std.error = TRUE</code>) SMD standard error estimates</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, each <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">smd</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   term   estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    2 -0.3213335</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.functionalstatistics.com/" class="external-link">Bradley Saul</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

